export type Locale = 'es' | 'en';

export const defaultLocale: Locale = 'es';

/** Cookie name for locale (shared client/server) */
export const LOCALE_COOKIE_NAME = 'adtlas_locale';

export const locales: Locale[] = ['es', 'en'];

// Translation keys (keyof translationsEn, exported for components)
export type TranslationKey = keyof typeof translationsEn;

const translationsEn = {
  'nav.home': 'Home',
  'nav.leads': 'Leads',
  'nav.inbox': 'Inbox',
  'nav.pipeline': 'Pipeline',
  'nav.tasks': 'Tasks',
  'nav.integrations': 'Integrations',
  'nav.admin': 'Admin',
  'nav.newLead': 'New lead',
  'nav.newTask': 'New task',
  'topbar.signOut': 'Sign out',
  'common.save': 'Save',
  'common.cancel': 'Cancel',
  'common.loading': 'Loading...',
  'common.saving': 'Saving...',
  'common.delete': 'Delete',
  'common.edit': 'Edit',
  'common.assign': 'Assign',
  'common.unassigned': 'Unassigned',
  'auth.login': 'Log in',
  'auth.register': 'Register',
  'auth.email': 'Email',
  'auth.password': 'Password',
  'auth.name': 'Name',
  'auth.signIn': 'Sign in',
  'auth.signingIn': 'Signing in...',
  'auth.createAccount': 'Create account',
  'auth.creatingAccount': 'Creating...',
  'auth.noAccount': "Don't have an account?",
  'auth.hasAccount': 'Already have an account?',
  'auth.signUp': 'Sign up',
  'auth.signInToCrm': 'Sign in to CRM',
  'auth.createCrmAccount': 'Create CRM account',
  'auth.companyName': 'Company name',
  'auth.yourName': 'Your name',
  'auth.invalidCredentials': 'Invalid email or password',
  'auth.errorCreatingAccount': 'Error creating account',
  'leads.title': 'Leads',
  'leads.newLead': 'New lead',
  'leads.name': 'Name',
  'leads.email': 'Email',
  'leads.phone': 'Phone',
  'leads.origin': 'Origin',
  'leads.assignTo': 'Assign to (optional)',
  'leads.deleteConfirm': 'Delete this lead? This cannot be undone.',
  'leads.deleteError': 'Could not delete lead.',
  'leads.viewMine': 'My records',
  'leads.viewTeam': 'My team',
  'leads.viewAll': 'All',
  'leads.stage': 'Stage',
  'leads.assignedTo': 'Assigned to',
  'leads.createdAt': 'Created',
  'pipeline.title': 'Pipeline',
  'pipeline.stages': 'Stages',
  'tasks.title': 'Tasks',
  'tasks.newTask': 'New task',
  'tasks.dueDate': 'Due date',
  'tasks.titleLabel': 'Title',
  'tasks.relatedLead': 'Related lead',
  'tasks.placeholder': 'e.g. Call lead back',
  'integrations.title': 'Integrations',
  'integrations.metaPageId': 'Page ID',
  'integrations.metaFormId': 'Form ID',
  'integrations.metaSourceName': 'Source name',
  'integrations.placeholderPage': 'e.g. 123456789',
  'integrations.placeholderForm': 'e.g. 987654321',
  'integrations.placeholderName': 'e.g. Web form',
  'integrations.addSource': 'Add source',
  'admin.users': 'Users',
  'admin.createUser': 'Create user',
  'admin.role': 'Role',
  'dashboard.recentLeads': 'Recent leads',
  'dashboard.totalLeads': 'Total leads',
  'dashboard.leadsThisWeek': 'Leads this week',
  'dashboard.byStage': 'By stage',
  'detail.details': 'Details',
  'detail.activities': 'Activities',
  'detail.related': 'Related',
  'detail.timeline': 'Timeline',
  'detail.changeStage': 'Change stage',
  'detail.quickActions': 'Quick actions',
  'detail.newTask': 'New task',
  'detail.noTasks': 'No tasks',
  'detail.errorCreatingLead': 'Error creating lead',
  'detail.backToLeads': 'Back to leads',
  'common.noName': 'No name',
  'common.noStage': 'No stage',
  'common.openMenu': 'Open menu',
  'common.closeMenu': 'Close menu',
  'common.actions': 'Actions',
  'inbox.title': 'Inbox',
  'inbox.noConversations': 'No conversations yet. Messages from WhatsApp will appear here.',
  'inbox.selectLead': 'Select a conversation',
  'inbox.profile': 'Profile',
  'inbox.lastMessage': 'Last message',
  'inbox.viewFullLead': 'View full lead',
  'timeline.leadCreated': 'Lead created',
  'timeline.taskCompleted': 'Task completed',
  'timeline.task': 'Task',
  'timeline.dueDate': 'Due',
  'timeline.noEvents': 'No events yet.',
  'timeline.currentStage': 'Current stage',
  'timeline.origin': 'Origin',
  'admin.newUser': 'New user',
  'admin.createUserTitle': 'Create user',
  'admin.password': 'Password',
  'admin.actions': 'Actions',
  'admin.create': 'Create',
  'admin.emailPasswordRequired': 'Email and password are required',
  'admin.errorCreatingUser': 'Error creating user',
  'admin.roleAdmin': 'Admin',
  'admin.roleManager': 'Manager',
  'admin.roleSales': 'Sales',
  'admin.roleSupport': 'Support',
  'admin.roleReadonly': 'Read only',
  'admin.pageTitle': 'Users',
  'admin.pageDescription': 'Manage your organization users. Create new users and assign roles.',
  'dashboard.greeting': 'Hello, {name}. Summary according to your role.',
  'dashboard.totalLeadsTitle': 'Total leads',
  'dashboard.newThisWeek': 'New this week',
  'dashboard.inPipeline': 'In pipeline',
  'dashboard.notWonLost': 'Not won/lost',
  'dashboard.quickActions': 'Quick actions',
  'dashboard.openPipeline': 'Open pipeline',
  'leads.tableTime': 'Time',
  'leads.tableTimeTitle': 'Time since lead entered (fast response = more closes)',
  'leads.tableName': 'Name',
  'leads.tableEmail': 'Email',
  'leads.tablePhone': 'Phone',
  'leads.tableDate': 'Date',
  'leads.tableSource': 'Source',
  'leads.tableActions': 'Actions',
  'leads.noLeadsYet': 'No leads yet',
  'leads.noLeadsHint': 'Add your first lead manually or connect Meta/Google in Integrations.',
  'leads.addFirstLead': 'Add your first lead',
  'leads.integrationsLink': 'Integrations',
  'pipeline.dragHint': 'Drag leads between columns to change stage.',
  'tasks.tasksPending': 'Pending tasks and reminders.',
  'tasks.addTaskToLead': 'Add task to this lead.',
  'tasks.addTaskOrReminder': 'Add task or reminder.',
  'tasks.titleRequired': 'Title is required',
  'tasks.errorCreatingTask': 'Error creating task',
  'integrations.subtitle': 'Connect your Meta or Google forms so leads flow into the CRM.',
  'integrations.metaLeadAds': 'Meta Lead Ads',
  'integrations.webhookHint': 'Register the page_id and form_id of your Lead Ads form. Use this webhook URL in Meta:',
  'integrations.replaceUrl': 'Replace [YOUR_APP_URL] with your app URL (e.g. https://app.adtlas.com).',
  'integrations.connectedSources': 'Connected sources',
  'integrations.pageIdFormIdRequired': 'Page ID and Form ID are required',
  'integrations.errorSaving': 'Error saving',
  'integrations.add': 'Add',
  'common.viewAll': 'View all',
  'detail.tasksTitle': 'Tasks',
  'detail.addTask': 'Add task',
  'detail.phone': 'Phone',
  'detail.created': 'Created',
  'detail.relatedComingSoon': 'Related opportunities and cases (coming soon).',
  'integrations.whatsappTitle': 'WhatsApp (Meta Cloud API)',
  'integrations.whatsappHint': 'Configure this URL and verify token in Meta for Developers. Set WHATSAPP_VERIFY_TOKEN and optionally WHATSAPP_TENANT_ID in your environment.',
  'integrations.whatsappWebhookUrl': 'Webhook URL',
  'integrations.whatsappVerifyTokenHint': 'Use the same verify token in Meta and in your env WHATSAPP_VERIFY_TOKEN.',
  'integrations.phoneNumberId': 'Phone number ID',
  'integrations.placeholderPhoneNumberId': 'e.g. 123456789012345',
  'integrations.connectedNumbers': 'Connected numbers',
  'integrations.phoneNumberIdRequired': 'Phone number ID is required',
  'integrations.googleTitle': 'Google (Lead Forms)',
  'integrations.googleComingSoon': 'Coming soon. Contact us to connect Google Lead Forms.',
  'pipeline.leadCount': 'leads',
  'detail.accountNumber': 'Account number',
  'detail.call': 'Call',
  'detail.emailAction': 'Email',
  'detail.whatsapp': 'WhatsApp',
} as const;

const translationsEs: Record<TranslationKey, string> = {
  'nav.home': 'Inicio',
  'nav.leads': 'Leads',
  'nav.inbox': 'Bandeja',
  'nav.pipeline': 'Pipeline',
  'nav.tasks': 'Tareas',
  'nav.integrations': 'Integraciones',
  'nav.admin': 'Admin',
  'nav.newLead': 'Nuevo lead',
  'nav.newTask': 'Nueva tarea',
  'topbar.signOut': 'Cerrar sesión',
  'common.save': 'Guardar',
  'common.cancel': 'Cancelar',
  'common.loading': 'Cargando...',
  'common.saving': 'Guardando...',
  'common.delete': 'Eliminar',
  'common.edit': 'Editar',
  'common.assign': 'Asignar',
  'common.unassigned': 'Sin asignar',
  'auth.login': 'Iniciar sesión',
  'auth.register': 'Registrarse',
  'auth.email': 'Correo',
  'auth.password': 'Contraseña',
  'auth.name': 'Nombre',
  'auth.signIn': 'Entrar',
  'auth.signingIn': 'Entrando...',
  'auth.createAccount': 'Crear cuenta',
  'auth.creatingAccount': 'Creando...',
  'auth.noAccount': '¿No tienes cuenta?',
  'auth.hasAccount': '¿Ya tienes cuenta?',
  'auth.signUp': 'Registrarse',
  'auth.signInToCrm': 'Entrar al CRM',
  'auth.createCrmAccount': 'Crear cuenta en el CRM',
  'auth.companyName': 'Nombre de la empresa',
  'auth.yourName': 'Tu nombre',
  'auth.invalidCredentials': 'Correo o contraseña incorrectos',
  'auth.errorCreatingAccount': 'Error al crear la cuenta',
  'leads.title': 'Leads',
  'leads.newLead': 'Nuevo lead',
  'leads.name': 'Nombre',
  'leads.email': 'Correo',
  'leads.phone': 'Teléfono',
  'leads.origin': 'Origen',
  'leads.assignTo': 'Asignar a (opcional)',
  'leads.deleteConfirm': '¿Eliminar este lead? No se puede deshacer.',
  'leads.deleteError': 'No se pudo eliminar el lead.',
  'leads.viewMine': 'Mis registros',
  'leads.viewTeam': 'Mi equipo',
  'leads.viewAll': 'Todos',
  'leads.stage': 'Etapa',
  'leads.assignedTo': 'Asignado a',
  'leads.createdAt': 'Creado',
  'pipeline.title': 'Pipeline',
  'pipeline.stages': 'Etapas',
  'tasks.title': 'Tareas',
  'tasks.newTask': 'Nueva tarea',
  'tasks.dueDate': 'Fecha límite',
  'tasks.titleLabel': 'Título',
  'tasks.relatedLead': 'Lead relacionado',
  'tasks.placeholder': 'ej. Llamar al lead',
  'integrations.title': 'Integraciones',
  'integrations.metaPageId': 'Page ID',
  'integrations.metaFormId': 'Form ID',
  'integrations.metaSourceName': 'Nombre del origen',
  'integrations.placeholderPage': 'ej. 123456789',
  'integrations.placeholderForm': 'ej. 987654321',
  'integrations.placeholderName': 'ej. Formulario web',
  'integrations.addSource': 'Añadir origen',
  'admin.users': 'Usuarios',
  'admin.createUser': 'Crear usuario',
  'admin.role': 'Rol',
  'dashboard.recentLeads': 'Leads recientes',
  'dashboard.totalLeads': 'Total de leads',
  'dashboard.leadsThisWeek': 'Leads esta semana',
  'dashboard.byStage': 'Por etapa',
  'detail.details': 'Detalles',
  'detail.activities': 'Actividades',
  'detail.related': 'Relacionados',
  'detail.timeline': 'Línea de tiempo',
  'detail.changeStage': 'Cambiar etapa',
  'detail.quickActions': 'Acciones rápidas',
  'detail.newTask': 'Nueva tarea',
  'detail.noTasks': 'Sin tareas',
  'detail.errorCreatingLead': 'Error al crear el lead',
  'detail.backToLeads': 'Volver a leads',
  'common.noName': 'Sin nombre',
  'common.noStage': 'Sin etapa',
  'common.openMenu': 'Abrir menú',
  'common.closeMenu': 'Cerrar menú',
  'common.actions': 'Acciones',
  'timeline.leadCreated': 'Lead creado',
  'timeline.taskCompleted': 'Tarea completada',
  'timeline.task': 'Tarea',
  'timeline.dueDate': 'Vencimiento',
  'inbox.title': 'Bandeja',
  'inbox.noConversations': 'Aún no hay conversaciones. Los mensajes de WhatsApp aparecerán aquí.',
  'inbox.selectLead': 'Selecciona una conversación',
  'inbox.profile': 'Perfil',
  'inbox.lastMessage': 'Último mensaje',
  'inbox.viewFullLead': 'Ver lead completo',
  'timeline.noEvents': 'Sin eventos aún.',
  'timeline.currentStage': 'Etapa actual',
  'timeline.origin': 'Origen',
  'admin.newUser': 'Nuevo usuario',
  'admin.createUserTitle': 'Crear usuario',
  'admin.password': 'Contraseña',
  'admin.actions': 'Acciones',
  'admin.create': 'Crear',
  'admin.emailPasswordRequired': 'Email y contraseña son obligatorios',
  'admin.errorCreatingUser': 'Error al crear usuario',
  'admin.roleAdmin': 'Admin',
  'admin.roleManager': 'Manager',
  'admin.roleSales': 'Ventas',
  'admin.roleSupport': 'Soporte',
  'admin.roleReadonly': 'Solo lectura',
  'admin.pageTitle': 'Usuarios',
  'admin.pageDescription': 'Gestiona los usuarios de tu organización. Crea nuevos usuarios y asigna roles.',
  'dashboard.greeting': 'Hola, {name}. Resumen según tu rol.',
  'dashboard.totalLeadsTitle': 'Total leads',
  'dashboard.newThisWeek': 'Nuevos esta semana',
  'dashboard.inPipeline': 'En pipeline',
  'dashboard.notWonLost': 'No ganados/perdidos',
  'dashboard.quickActions': 'Acciones rápidas',
  'dashboard.openPipeline': 'Abrir pipeline',
  'leads.tableTime': 'Tiempo',
  'leads.tableTimeTitle': 'Tiempo desde que entró el lead (respuesta rápida = más cierres)',
  'leads.tableName': 'Nombre',
  'leads.tableEmail': 'Email',
  'leads.tablePhone': 'Teléfono',
  'leads.tableDate': 'Fecha',
  'leads.tableSource': 'Origen',
  'leads.tableActions': 'Acciones',
  'leads.noLeadsYet': 'Aún no hay leads',
  'leads.noLeadsHint': 'Añade tu primer lead a mano o conecta Meta/Google en Integraciones.',
  'leads.addFirstLead': 'Añadir primer lead',
  'leads.integrationsLink': 'Integraciones',
  'pipeline.dragHint': 'Arrastra los leads entre columnas para cambiar de etapa.',
  'tasks.tasksPending': 'Tareas pendientes y recordatorios.',
  'tasks.addTaskToLead': 'Añadir tarea a este lead.',
  'tasks.addTaskOrReminder': 'Añadir tarea o recordatorio.',
  'tasks.titleRequired': 'El título es obligatorio',
  'tasks.errorCreatingTask': 'Error al crear tarea',
  'integrations.subtitle': 'Conecta tus formularios de Meta o Google para que los leads entren al CRM.',
  'integrations.metaLeadAds': 'Meta Lead Ads',
  'integrations.webhookHint': 'Registra el page_id y form_id de tu formulario Lead Ads. Usa esta URL en Meta:',
  'integrations.replaceUrl': 'Sustituye [YOUR_APP_URL] por la URL de tu app (ej. https://app.adtlas.com).',
  'integrations.connectedSources': 'Orígenes conectados',
  'integrations.pageIdFormIdRequired': 'Page ID y Form ID son obligatorios',
  'integrations.errorSaving': 'Error al guardar',
  'integrations.add': 'Añadir',
  'common.viewAll': 'Ver todos',
  'detail.tasksTitle': 'Tareas',
  'detail.addTask': 'Añadir tarea',
  'detail.phone': 'Teléfono',
  'detail.created': 'Creado',
  'detail.relatedComingSoon': 'Oportunidades y casos relacionados (próximamente).',
  'integrations.whatsappTitle': 'WhatsApp (Meta Cloud API)',
  'integrations.whatsappHint': 'Configura esta URL y el verify token en Meta for Developers. Define WHATSAPP_VERIFY_TOKEN y opcionalmente WHATSAPP_TENANT_ID en tu entorno.',
  'integrations.whatsappWebhookUrl': 'URL del webhook',
  'integrations.whatsappVerifyTokenHint': 'Usa el mismo verify token en Meta y en tu variable WHATSAPP_VERIFY_TOKEN.',
  'integrations.phoneNumberId': 'Phone number ID',
  'integrations.placeholderPhoneNumberId': 'ej. 123456789012345',
  'integrations.connectedNumbers': 'Números conectados',
  'integrations.phoneNumberIdRequired': 'El Phone number ID es obligatorio',
  'integrations.googleTitle': 'Google (Lead Forms)',
  'integrations.googleComingSoon': 'Próximamente. Contáctanos para conectar formularios de Google.',
  'pipeline.leadCount': 'leads',
  'detail.accountNumber': 'Nº cuenta',
  'detail.call': 'Llamar',
  'detail.emailAction': 'Email',
  'detail.whatsapp': 'WhatsApp',
};

const dictionaries: Record<Locale, Record<TranslationKey, string>> = {
  en: translationsEn,
  es: translationsEs,
};

export function getT(locale: Locale) {
  const d = dictionaries[locale] ?? dictionaries.es;
  return (key: TranslationKey): string => d[key] ?? key;
}
